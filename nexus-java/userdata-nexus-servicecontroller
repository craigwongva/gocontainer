sudo yum install docker -y > /tmp/userdata-nexus-servicecontroller-4100 2>&1
sudo service docker start > /tmp/userdata-nexus-servicecontroller-4200 2>&1
#The following is necessary if working interactively as ec2-user:
# sudo usermod -a -G docker ec2-user

cd /home/ec2-user/gocontainer/nexus-java > /tmp/userdata-nexus-servicecontroller-4300 2>&1
#sudo cp Dockerfile-first_webapp Dockerfile #this starts 8080 for test purposes but isn't central to docker+nexus issue
sudo cp Dockerfile-nexus-servicecontroller Dockerfile > /tmp/userdata-nexus-servicecontroller-4400 2>&1
sudo docker build --build-arg WHEREISNEXUS=$1 -t venicegeodev/container_servicecontroller . > /tmp/userdata-nexus-servicecontroller-4500 2>&1
sudo docker login --username venicegeodev --password demo1024 > /tmp/userdata-nexus-servicecontroller-4510 2>&1
sudo docker push venicegeodev/container_servicecontroller > /tmp/userdata-nexus-servicecontroller-4520 2>&1
sudo docker pull venicegeodev/container_servicecontroller> /tmp/userdata-nexus-servicecontroller-4530 2>&1
sudo docker run -d -p 8088:8088 --add-host="jobdb.dev:$1" --add-host="kafka.dev:$1" venicegeodev/container_servicecontroller > /tmp/userdata-nexus-servicecontroller-4999 2>&1





