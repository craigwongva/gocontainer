sudo yum install docker -y > /tmp/userdata-next-first-webapp-1100 2>&1
sudo service docker start > /tmp/userdata-next-first-webapp-1200 2>&1
#The following is necessary if working interactively as ec2-user:
# sudo usermod -a -G docker ec2-user

cd /home/ec2-user/gocontainer/nexus-java > /tmp/userdata-next-first-webapp-1300 2>&1
sudo cp Dockerfile-first_webapp Dockerfile #this starts 8080 for test purposes but isn't central to docker+nexus issue
sudo cp Dockerfile-nexus-first_webapp Dockerfile > /tmp/userdata-next-first-webapp-1400 2>&1
sudo docker build --build-arg WHEREISNEXUS=$1 -t venicegeodev/container_first_webapp . > /tmp/userdata-next-first-webapp-1500 2>&1
sudo docker login --username venicegeodev --password demo1024 > /tmp/userdata-next-first-webapp-1510 2>&1
sudo docker push venicegeodev/container_first_webapp > /tmp/userdata-next-first-webapp-1520 2>&1
sudo docker pull venicegeodev/container_first_webapp > /tmp/userdata-next-first-webapp-1530 2>&1
sudo docker run -d -p 7080:7080 venicegeodev/container_first_webapp > /tmp/userdata-next-first-webapp-9999 2>&1





